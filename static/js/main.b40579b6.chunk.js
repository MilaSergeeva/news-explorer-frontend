(this["webpackJsonpnews_explorer-frontend"]=this["webpackJsonpnews_explorer-frontend"]||[]).push([[0],Array(31).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),r=n(19),o=n.n(r),i=(n(31),n(5)),l=n(20),u=n(2),d=n(3),j=(n(32),n(33),n.p+"static/media/newsExplorerWhite.16fd9b4d.svg"),p=(n(34),n.p+"static/media/exitWhite.14e8b541.svg"),b=n.p+"static/media/exitBlack.6808b0a9.svg";var h=function(e){var t=e.isMenuOpened,n=e.onAutorizationClick,s=e.onChangeActiveStatus,c=e.onCloseMenu,r=e.loggedIn,o=e.onSignOut,l=e.pathName,u=e.currentUser;return Object(a.jsx)("div",{className:"header-bar__menu",children:!1===r?Object(a.jsxs)("div",{className:"header-bar__menu-container ".concat(!0===t?"opened":""),children:[Object(a.jsx)(i.c,{exact:!0,to:"/news-explorer-frontend/",activeClassName:"activeMain",className:"header-bar__nav-link color-black",onClick:s,children:Object(a.jsx)("p",{children:"Main"})}),Object(a.jsx)("button",{type:"button","aria-label":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",className:"header-bar__button",onClick:n,children:"Register"})]}):Object(a.jsxs)("div",{className:"header-bar__menu-container ".concat(!0===t?"opened":""),children:[Object(a.jsx)(i.c,{exact:!0,to:"/news-explorer-frontend/",activeClassName:"activeMain",className:"header-bar__nav-link color-black",onClick:s,children:Object(a.jsx)("p",{children:"Main"})}),Object(a.jsx)(i.c,{exact:!0,to:"/news-explorer-frontend/saved-news",activeClassName:"activeSavedNews",className:"header-bar__nav-link color-white",onClick:s,children:Object(a.jsx)("p",{className:"header-bar__saved-news",children:"Saved news"})}),Object(a.jsxs)(i.b,{to:"/news-explorer-frontend/",className:"header-bar__button ".concat("/news-explorer-frontend/"===l?" ":"color-black"),onClick:function(){c(),o()},children:[u.name,Object(a.jsx)("img",{className:"header-bar__exit-img",src:"/news-explorer-frontend/"===l?p:b,alt:"\u0437\u043d\u0430\u043a \u0432\u044b\u0445\u043e\u0434\u0430"})]})]})})},m=(n(40),n.p+"static/media/newsExplorerBlack.ddd1bf25.svg");var f=function(e){var t=e.isMenuOpened,n=e.onMenuTagClick,s=e.onChangeActiveStatus,c=e.onCloseMenu,r=e.onSignOut,o=e.currentUser;return Object(a.jsxs)("div",{className:"header-bar white-theme",children:[Object(a.jsx)(i.b,{to:"/news-explorer-frontend/",className:"header-bar__logo-link",children:Object(a.jsx)("img",{className:"header-bar__logo",src:m,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(a.jsx)("div",{className:"header-bar__menu-icon-container",children:Object(a.jsxs)("div",{className:"header-bar__menu-icon",onClick:n,children:[Object(a.jsx)("div",{className:"header-bar__menu-icon-line1 white-theme-menu-icon-background"}),Object(a.jsx)("div",{className:"header-bar__menu-icon-line2 white-theme-menu-icon-background"})]})}),Object(a.jsx)(h,{style:{color:"#000"},isMenuOpened:t,onChangeActiveStatus:s,onCloseMenu:c,onSignOut:r,currentUser:o})]})};var g=function(e){var t=e.onAutorizationClick,n=e.onChangeActiveStatus,s=e.onMenuTagClick,c=e.isMenuOpened,r=e.darkBackgroundHeader,o=e.onCloseMenu,l=e.loggedIn,u=e.onSignOut,p=e.pathName,b=e.currentUser;return Object(a.jsxs)("header",{className:"header ".concat(!0===c?"header__border-radius":" "),children:[Object(a.jsx)(d.b,{exact:!0,path:"/news-explorer-frontend/",children:Object(a.jsxs)("div",{className:"header-bar ".concat(!0===r?"dark-theme":" "),children:[Object(a.jsx)(i.b,{to:"/news-explorer-frontend/",className:"header-bar__logo-link",children:Object(a.jsx)("img",{className:"header-bar__logo",src:j,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(a.jsx)("div",{className:"header-bar__menu-icon-container",children:Object(a.jsxs)("div",{className:"header-bar__menu-icon ".concat(c?"change":" "),onClick:s,children:[Object(a.jsx)("div",{className:"header-bar__menu-icon-line1"}),Object(a.jsx)("div",{className:"header-bar__menu-icon-line2"})]})}),Object(a.jsx)(h,{style:{color:"#fff"},isMenuOpened:c,onAutorizationClick:t,onChangeActiveStatus:n,onCloseMenu:o,loggedIn:l,onSignOut:u,pathName:p,currentUser:b})]})}),Object(a.jsx)(d.b,{exact:!0,path:"/saved-news",children:Object(a.jsx)(f,{isMenuOpened:c,onMenuTagClick:s,onChangeActiveStatus:n,onCloseMenu:o,onSignOut:u,currentUser:b})})]})};n(41),n(42),n(43);var O=function(e){var t=e.article,n=e.loggedIn,s=e.onToggleClick,c=e.isArticleSaved,r=function(e){var t=new Date(e),n=t.toLocaleString("ru-Ru",{year:"numeric"}),a=t.toLocaleString("ru-Ru",{day:"2-digit",month:"long"});return"".concat(a,", ").concat(n)}(t.publishedAt||t.date);return Object(a.jsxs)("figure",{className:"news-card",children:[Object(a.jsx)("a",{href:t.url||t.link,className:"",target:"_blank",children:Object(a.jsx)("img",{className:"news-card__img",src:t.urlToImage||t.image,alt:t.keyword})}),Object(a.jsxs)("div",{className:"news-card__lables",children:[Object(a.jsxs)(d.b,{exact:!0,path:"/news-explorer-frontend/",children:[Object(a.jsx)("button",{type:"button","aria-label":"save",className:"news-card__save-btn ".concat(c&&"saved"),onClick:function(){n&&s(t)}}),Object(a.jsx)("p",{className:"news-card__save-notification",style:{display:n?"none":"inline-block"},children:"Login, to save news"})]}),Object(a.jsxs)(d.b,{exact:!0,path:"/news-explorer-frontend/saved-news",children:[Object(a.jsx)("p",{className:"news-card__search-tag",children:t.keyword}),Object(a.jsx)("button",{type:"button","aria-label":"delete",className:"news-card__delete-btn",onClick:function(){s(t)}}),Object(a.jsx)("p",{className:"news-card__delete-notification",children:"Remove from saved"})]})]}),Object(a.jsx)("a",{href:t.url||t.link,className:"news-card__link-to-news",target:"_blank",children:Object(a.jsxs)("figcaption",{className:"news-card__inf-container",children:[Object(a.jsx)("time",{className:"news-card__date",children:r}),Object(a.jsxs)("div",{className:"news-card__content",children:[Object(a.jsx)("h3",{className:"news-card__title",children:t.title}),Object(a.jsx)("p",{className:"news-card__text",children:t.description||t.text})]}),Object(a.jsx)("p",{className:"news-card__resource",children:t.source.name||t.source})]})})]})};var _=function(e){var t=e.loggedIn,n=e.articles,r=e.savedNews,o=e.onToggleClick,i=Object(s.useState)(3),l=Object(u.a)(i,2),d=l[0],j=l[1],p=function(e){if(t)return!!r.find((function(t){return t.title===e.title}))};return c.a.useEffect((function(){j(3)}),[n]),Object(a.jsxs)("div",{className:"search-result-success",children:[Object(a.jsx)("h2",{className:"search-result-success__tile",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(a.jsx)("div",{className:"news-card-list",children:n.slice(0,d).map((function(e){return Object(a.jsx)(O,{article:e,loggedIn:t,onToggleClick:o,isArticleSaved:p(e)},e.publishedAt)}))}),d<=n.length?Object(a.jsx)("button",{type:"button","aria-label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435",className:"search-result-success__button",onClick:function(){j(d+3)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451"}):""]})},x=(n(44),n.p+"static/media/avatar_mila.773a1252.png");var v=function(){return Object(a.jsxs)("div",{className:"profile__container",children:[Object(a.jsx)("img",{className:"profile__avatar",src:x,alt:"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(a.jsxs)("div",{className:"profile__about",children:[Object(a.jsx)("h3",{className:"profile__title",children:"About the author"}),Object(a.jsx)("p",{className:"profile__context",children:" A few words about myself. Despite my previous experience, at some point I decided to develop myself as a web developer. In the beginning I studied using free curses, articles and of course YouTube. Then I found serious and high-quality training course for web developers. In total it took me 10 months to graduate. When I had free time I also took part in additional real projects. All that gave me good initial knowledge to enter the profession. I learned varied tools such as HTML, CSS, JavaScript, Express.js, Reakt and Node.js. I like being able to create something from nothing. Taking a visual concept from my imagination and crafting a beautiful object - either physical or digital - gives me great satisfaction. I like 3D modelling, hands crafting, traveling and snowboarding."})]})]})};n(45);var N=function(e){var t=e.onSearch,n=Object(s.useState)("Enter news subject"),r=Object(u.a)(n,2),o=r[0],i=r[1],l=Object(s.useState)(""),d=Object(u.a)(l,2),j=d[0],p=d[1],b=c.a.useState(!1),h=Object(u.a)(b,2),m=h[0],f=h[1];return c.a.useEffect((function(){"query"in localStorage&&p(localStorage.getItem("query"))}),[]),Object(a.jsxs)("div",{className:"search-form",children:[Object(a.jsx)("h1",{className:"search-form__title",children:"What's going on in the world?"}),Object(a.jsx)("p",{className:"search-form__text",children:"Find the latest news on any topic and save it in your profile."}),Object(a.jsxs)("div",{className:"search-form__input-fild",children:[Object(a.jsx)("input",{type:"text",name:"search",className:"search-form__input",minLength:"2",maxLength:"40",autoComplete:"off",pattern:"^[A-Za-z\u0410-\u042f\u0430-\u044f]{2,40}$",value:j,placeholder:o,onChange:function(e){var t=e.target,n=t.value;p(n),f(t.closest("input").checkValidity())},required:!0}),Object(a.jsx)("button",{type:"button","aria-label":"\u0418\u0441\u043a\u0430\u0442\u044c",className:"search-form__search-button",onClick:function(e){e.preventDefault(),m?t(j):(p(""),i("You need to enter a keyword"),localStorage.removeItem("query"))},children:"Search"})]})]})};n(46);var w=function(){return Object(a.jsxs)("div",{className:"preloader",children:[Object(a.jsx)("div",{className:"preloader__icon"}),Object(a.jsx)("p",{className:"preloader__text",children:"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."})]})},k=(n(47),n.p+"static/media/not-found.8fabc218.svg");var S=function(){return Object(a.jsxs)("div",{className:"search-result-fail",children:[Object(a.jsx)("img",{className:"search-result-fail__img",src:k,alt:"not-found"}),Object(a.jsx)("h3",{className:"search-result-fail__title",children:"Nothing found"}),Object(a.jsx)("p",{className:"search-result-fail__paragraph",children:"Unfortunately, your search returned no results."})]})},C=n(9),y=n(25),I=function(e){var t=e.component,n=Object(y.a)(e,["component"]);return Object(a.jsx)(d.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){return!0===n.loggedIn?Object(a.jsx)(t,Object(C.a)(Object(C.a)({},e),n)):Object(a.jsx)(d.a,{to:{pathname:"/news-explorer-frontend/",search:"?showAuth=1"}})}}))},T=(n(48),c.a.createContext());var A=function(e){var t=e.articles,n=c.a.useContext(T),s=c.a.useState(""),r=Object(u.a)(s,2),o=r[0],i=r[1],l=c.a.useState(""),d=Object(u.a)(l,2),j=d[0],p=d[1],b=c.a.useState({}),h=Object(u.a)(b,2),m=h[0],f=h[1],g=t.length;return c.a.useEffect((function(){var e={};t.forEach((function(t){t.keyword in e?e[t.keyword]+=1:e[t.keyword]=1}));var n=Object.keys(e).sort((function(t,n){return e[n]-e[t]}));if(f(n),n.length<=3){var a=n.join(", ");i(a)}else{var s="".concat(n[0],", ").concat(n[1]," "),c=" ".concat(n.length-2,"-\u043c \u0434\u0440\u0443\u0433\u0438\u043c");i(s),p(c)}}),[t]),Object(a.jsxs)("div",{className:"user-info",children:[Object(a.jsx)("h5",{className:"user-info__title",children:"Saved news"}),Object(a.jsxs)("h2",{className:"user-info__main-info",children:[n.name,", you have ",g," saved news."]}),Object(a.jsxs)("p",{className:"user-info__additional-info",children:["With keywords:",Object(a.jsxs)("span",{className:"user-info__additional-info_font_bold",children:[" ",o]}),m.length>3&&Object(a.jsx)("span",{className:"user-info__additional-info_font_bold",children:j})]})]})};n(49);var E=function(e){var t=e.loggedIn,n=e.articles,s=e.onToggleClick;return Object(a.jsx)("div",{className:"saved-news",children:Object(a.jsx)("div",{className:"news-card-list",children:n.map((function(e){return Object(a.jsx)(O,{article:e,loggedIn:t,onToggleClick:s},e._id)}))})})};var L=function(e){var t=e.articles,n=e.onToggleClick;return Object(a.jsxs)("div",{children:[Object(a.jsx)(A,{articles:t}),Object(a.jsx)(E,{articles:t,onToggleClick:n})]})};var M=function(e){var t=e.loggedIn,n=e.savedNews,s=e.onSearch,c=e.articles,r=e.searchSuccess,o=e.preloaderIsOn,i=e.onToggleClick,l=e.isArticleSaved;return e.currentUser,Object(a.jsxs)("div",{className:"main-content",children:[Object(a.jsxs)(d.b,{exact:!0,path:"/news-explorer-frontend/",children:[Object(a.jsx)(N,{onSearch:s}),o?Object(a.jsx)(w,{}):"",Object(a.jsxs)("section",{className:"search-result",children:[r&&Object(a.jsx)(_,{loggedIn:t,articles:c,savedNews:n,onToggleClick:i,isArticleSaved:l}),!1===r&&Object(a.jsx)(S,{})]})]}),Object(a.jsx)(I,{exact:!0,path:"/news-explorer-frontend/saved-news",articles:n,onToggleClick:i,loggedIn:t,component:L}),Object(a.jsx)(d.b,{exact:!0,path:"/news-explorer-frontend/",children:Object(a.jsx)("section",{className:"profile",children:Object(a.jsx)(v,{})})})]})},R=(n(50),n.p+"static/media/facebook.ce8865e2.svg"),P=n.p+"static/media/gitHub.2699c069.svg";var U=function(){return Object(a.jsxs)("footer",{className:"footer",children:[Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Supersite, Powered by News API"}),Object(a.jsx)(d.b,{path:"/news-explorer-frontend/*",children:Object(a.jsxs)("nav",{className:"footer__nav",children:[Object(a.jsxs)("ul",{className:"footer__nav-links",children:[Object(a.jsx)("li",{children:Object(a.jsx)(i.b,{to:"/news-explorer-frontend/",className:"footer__nav-link",children:Object(a.jsx)("p",{className:"footer__link-to-main",children:"Main"})})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://praktikum.yandex.ru",className:"footer__nav-link",target:"_blank",children:Object(a.jsx)("p",{className:"footer__link-to-praktikum",children:"\u042f\u043d\u0434\u0435\u043a\u0441.Praktikum"})})})]}),Object(a.jsxs)("ul",{className:"footer__sosial-links",children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com",target:"_blank",className:"footer__gitHub-logo",children:Object(a.jsx)("img",{className:"footer__link-to-gitHub",src:P,alt:"gitHub_logo"})})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://facebook.com",target:"_blank",className:"footer__facebook-logo",children:Object(a.jsx)("img",{className:"footer__link-to-facebook",src:R,alt:"facebook"})})})]})]})})]})},q=n(22),z=n(23),F=n(24),D=n.n(F),V=function(){function e(t){var n=t.baseUrl,a=t.headers;Object(q.a)(this,e),this.baseUrl=n,this.headers=a}return Object(z.a)(e,[{key:"makeRequest",value:function(e,t,n){var a="".concat(this.baseUrl,"/").concat(e),s={method:"".concat(t),headers:this.headers};return void 0!==n&&["POST","PUT","PATCH"].includes(t)?s.body=JSON.stringify(n):void 0!==n&&(a="".concat(a,"?").concat(D.a.encode(n))),fetch(a,s).then((function(e){return e.ok?e.json():e.status>=400&&e.status<500?e.json().then((function(e){return Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.message))})).catch((function(e){console.log(e.message,"\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})):Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))})).catch((function(e){console.log(e.message,"\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getSavedNews",value:function(){return this.makeRequest("articles","GET")}},{key:"saveNews",value:function(e){return this.makeRequest("articles","POST",e)}},{key:"deleteSavedNews",value:function(e){var t="articles/".concat(e);return this.makeRequest(t,"DELETE")}},{key:"getUserInfo",value:function(){return this.makeRequest("users/me","GET")}},{key:"getNews",value:function(e,t,n,a,s){var c={apiKey:e,q:t,from:n,to:a,pageSize:s};return this.makeRequest("everything","GET",c)}}]),e}(),B="https://news-exploer.herokuapp.com/api",H="jwt",J=function(){return localStorage.getItem(H)},W=function(){localStorage.removeItem(H)};new V({baseUrl:"".concat(B),headers:{authorization:"Bearer ".concat(J()),"Content-Type":"application/json"}});function $(e){return new V({baseUrl:"".concat(B),headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})}var G=new V({baseUrl:"https://nomoreparties.co/news/v2",headers:{Accept:"application/json","Content-Type":"application/json"}}),Y=(n(53),n(54),function(e){return Object(a.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen&&"popup_opened"," "),children:Object(a.jsxs)("div",{className:"popup__container",onClick:e.onClick,children:[Object(a.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close",onClick:e.onClose}),Object(a.jsx)("div",{className:"popup__content",children:Object(a.jsxs)("form",{method:"POST",name:"user-info",className:"popup__form",onSubmit:e.onSubmit,noValidate:!0,disabled:e.isSubmitting,children:[Object(a.jsx)("h3",{className:"popup__title",children:e.title}),e.children,Object(a.jsx)("span",{className:"popup__error popup__error_position",children:e.errorMassageOnSubmit||""}),Object(a.jsx)("button",{type:"submit",className:"popup__btn-save ".concat(e.isValid&&!0!==e.isSubmitting?"active-btn":""),"data-submitting-label":"Saving...",disabled:!0!==e.isValid||e.isSubmitting,children:e.savebtn}),Object(a.jsxs)("p",{className:"popup__redirect",children:["or\xa0",Object(a.jsx)("span",{className:"popup__redirect-to",onClick:e.onRedirect,children:e.redirectTo})]})]})})]})})}),Z=n(12);var K=function(){var e=c.a.useState({}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=c.a.useState({}),o=Object(u.a)(r,2),i=o[0],l=o[1],d=c.a.useState(!1),j=Object(u.a)(d,2),p=j[0],b=j[1],h=Object(s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(e),l(t),b(n)}),[a,l,b]);return{values:n,handleChange:function(e){var t=e.target,s=t.value,c=t.name;a(Object(C.a)(Object(C.a)({},n),{},Object(Z.a)({},c,s))),l(Object(C.a)(Object(C.a)({},i),{},Object(Z.a)({},c,t.validationMessage))),b(t.closest("form").checkValidity())},errors:i,isValid:p,resetForm:h}},Q=function(e){var t=e.onClose,n=e.isOpen,c=e.onRedirect,r=e.onClick,o=e.onRegister,i=e.messageOnRegister,l=e.isSubmitting,u=K(),d=u.values,j=u.handleChange,p=u.errors,b=u.isValid,h=u.resetForm;Object(s.useEffect)((function(){h()}),[n,h]);return Object(a.jsxs)(Y,{name:"regstration",title:"Registration",savebtn:"Register",onClose:t,onClick:r,isOpen:n,isValid:b,redirectTo:"Login",onRedirect:c,onSubmit:function(e){e.preventDefault(),o(d.email,d.password,d.name)},errorMassageOnSubmit:i,isSubmitting:l,children:[Object(a.jsxs)("fieldset",{className:"popup__input-container",children:[Object(a.jsx)("p",{className:"popup__input-title",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",placeholder:"Fill your email",className:"popup__input",minLength:"5",maxLength:"40",autoComplete:"off",value:d.email||"",onChange:j,required:!0,disabled:l}),Object(a.jsx)("span",{className:"popup__error",children:p.email||""})]}),Object(a.jsxs)("fieldset",{className:"popup__input-container",children:[Object(a.jsx)("p",{className:"popup__input-title",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",placeholder:"Fill your password",className:"popup__input",minLength:"8",maxLength:"30",autoComplete:"off",pattern:"^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&~])[A-Za-z\\d@$!%*#?&~]{8,}$",value:d.password||"",onChange:j,required:!0,disabled:l}),Object(a.jsx)("span",{className:"popup__error",children:p.password?"Password must contain letters, numbers and spesial characters (@$!%*#?&~), and be between 8 and 30 characters":""})]}),Object(a.jsxs)("fieldset",{className:"popup__input-container",children:[Object(a.jsx)("p",{className:"popup__input-title",children:"Name"}),Object(a.jsx)("input",{type:"text",name:"name",placeholder:"Fill your name",className:"popup__input",minLength:"2",maxLength:"30",autoComplete:"off",value:d.name||"",onChange:j,required:!0,disabled:l}),Object(a.jsx)("span",{className:"popup__error",children:p.name||""})]})]})},X=(n(55),function(e){var t=e.onClose,n=e.isOpen,c=e.onRedirect,r=e.onClick,o=e.onLogin,i=e.messageOnLogin,l=e.isSubmitting,u=K(),d=u.values,j=u.handleChange,p=u.errors,b=u.isValid,h=u.resetForm;Object(s.useEffect)((function(){h()}),[n,h]);return Object(a.jsxs)(Y,{name:"login",title:"Ligin",savebtn:"Login",isOpen:n,onClose:t,onRedirect:c,onClick:r,isValid:b,redirectTo:"Register",onSubmit:function(e){e.preventDefault(),o(d.email,d.password)},errorMassageOnSubmit:i,isSubmitting:l,children:[Object(a.jsxs)("fieldset",{className:"popup__input-container",children:[Object(a.jsx)("p",{className:"popup__input-title",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",placeholder:"Fill your email",className:"popup__input",minLength:"5",maxLength:"40",autoComplete:"off",value:d.email||"",onChange:j,required:!0,disabled:l}),Object(a.jsx)("span",{className:"popup__error",children:p.email||""})]}),Object(a.jsxs)("fieldset",{className:"popup__input-container",children:[Object(a.jsx)("p",{className:"popup__input-title",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",placeholder:"Fill your password",className:"popup__input",minLength:"8",maxLength:"30",autoComplete:"off",value:d.password||"",onChange:j,required:!0,disabled:l}),Object(a.jsx)("span",{className:"popup__error",children:p.password?"Password must contain letters, numbers and spesial characters (@$!%*#?&~), and be between 8 and 30 characters":""})]})]})});n(56);var ee=function(e){var t=e.success,n=e.isOpen,s=e.onClose,c=e.onClick,r=e.onRedirect;return Object(a.jsx)("div",{className:"popup popup-info-tools ".concat(n&&"popup_opened"),children:Object(a.jsxs)("div",{className:"info-tools",children:[Object(a.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close",onClick:s}),!0===t?Object(a.jsxs)("div",{className:"popup__container",onClick:c,children:[Object(a.jsx)("h3",{className:"popup__title popup__title_position",children:"User registered successfully!"}),Object(a.jsx)("span",{className:"popup__redirect-to popup__redirect-to_font-size",onClick:r,children:"Login"})]}):Object(a.jsx)("div",{className:"popup__container",onClick:c,children:Object(a.jsx)("h3",{className:"popup__title popup__title_position",children:"Something went wrong! Please try again."})})]})})},te=n.p+"static/media/header_background.eac7a5b1.png",ne=function(){return"undefined"!==typeof window?new URLSearchParams(window.location.search):new URLSearchParams};var ae=function(){var e,t,n=Object(s.useState)({}),r=Object(u.a)(n,2),o=r[0],i=r[1],j=Object(s.useState)(!0),p=Object(u.a)(j,2),b=p[0],h=p[1],m=Object(s.useState)([]),f=Object(u.a)(m,2),O=f[0],_=f[1],x=Object(s.useState)([]),v=Object(u.a)(x,2),N=v[0],w=v[1],k=Object(s.useState)(!1),S=Object(u.a)(k,2),C=S[0],y=S[1],I=Object(s.useState)(!1),A=Object(u.a)(I,2),E=A[0],L=A[1],R=Object(s.useState)(!1),P=Object(u.a)(R,2),q=P[0],z=P[1],F=Object(s.useState)(!1),D=Object(u.a)(F,2),V=D[0],Z=D[1],K=Object(s.useState)(!1),ae=Object(u.a)(K,2),se=(ae[0],ae[1]),ce=Object(s.useState)(!0),re=Object(u.a)(ce,2),oe=re[0],ie=re[1],le=Object(s.useState)(!1),ue=Object(u.a)(le,2),de=ue[0],je=ue[1],pe=Object(s.useState)(""),be=Object(u.a)(pe,2),he=be[0],me=be[1],fe=Object(s.useState)(""),ge=Object(u.a)(fe,2),Oe=ge[0],_e=ge[1],xe=Object(s.useState)(!1),ve=Object(u.a)(xe,2),Ne=ve[0],we=ve[1],ke=Object(s.useState)(null),Se=Object(u.a)(ke,2),Ce=Se[0],ye=Se[1],Ie=Object(s.useState)(!1),Te=Object(u.a)(Ie,2),Ae=Te[0],Ee=Te[1],Le=Object(s.useState)(""),Me=Object(u.a)(Le,2),Re=Me[0],Pe=Me[1],Ue=Object(s.useState)(!1),qe=Object(u.a)(Ue,2),ze=qe[0],Fe=qe[1],De=Object(d.f)(),Ve=Object(d.g)().pathname,Be=new Date,He=Be.toISOString().substr(0,16),Je=(e=Be,t=7,new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)).toISOString().substr(0,16);function We(){y(!1),L(!1),je(!1),_e(""),me(""),De.push("/news-explorer-frontend/")}var $e=function(){!1===C||!0===de?(y(!0),L(!1),je(!1)):(y(!1),L(!0))},Ge=function(){!0===q&&(z(!1),!0===V&&Z(!1))},Ye=function(e){e.target.classList.contains("popup")&&(se(!0),We())},Ze=function(){return se(!1)};return Object(s.useEffect)((function(){var e,t=document.getElementsByClassName("popup"),n=Object(l.a)(t);try{for(n.s();!(e=n.n()).done;){e.value.addEventListener("mousedown",Ye)}}catch(a){n.e(a)}finally{n.f()}}),[]),Object(s.useEffect)((function(){function e(e){"Escape"===e.key&&We()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),c.a.useEffect((function(){var e=J();if(e){var t=$(e);Promise.all([t.getUserInfo(),t.getSavedNews()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];i(n),_(a)})).catch((function(e){h(!1),W()}))}else h(!1)}),[b]),c.a.useEffect((function(){if("articles"in localStorage)try{var e=JSON.parse(localStorage.getItem("articles"));w(e),e.length>0&&ye(!0)}catch(t){console.error("Failed to load articles from local storage. Error ".concat(t.message))}"query"in localStorage&&Pe(localStorage.getItem("query"))}),[]),Object(s.useEffect)((function(){y(!!ne().get("showAuth"))}),[!!ne().get("showAuth")]),Object(a.jsx)(T.Provider,{value:o,children:Object(a.jsxs)("div",{className:"root",children:[Object(a.jsxs)("div",{className:"page",style:{backgroundImage:"".concat("/news-explorer-frontend/"===Ve&&"url(".concat(te,")"))},children:[Object(a.jsx)(g,{onAutorizationClick:function(){L(!0),!0===q&&(z(!1),Z(!1))},onChangeActiveStatus:function(){ie(!oe),Ge()},onMenuTagClick:function(e){e.target.classList.toggle("change"),Z(!1===V),z(!1===q)},isMenuOpened:q,onCloseMenu:Ge,darkBackgroundHeader:V,onSignOut:function(){localStorage.removeItem("articles"),localStorage.removeItem("query"),W(),w([]),ye(null),h(!1),De.push("/news-explorer-frontend/")},loggedIn:b,pathName:Ve,currentUser:o}),Object(a.jsx)("main",{className:"content",children:Object(a.jsx)(M,{loggedIn:b,savedNews:O,articles:N,onSearch:function(e){Ee(!0),G.getNews("670ce72cce9c46b28214a8e2e4e4f7da",e,He,Je,100).then((function(t){Ee(!1),localStorage.removeItem("articles"),w(t.articles),t.articles.length>0?ye(!0):ye(!1),Pe(e),localStorage.setItem("articles",JSON.stringify(t.articles)),localStorage.setItem("query",e)})).catch((function(e){Ee(!1),ye(!1)}))},searchSuccess:Ce,preloaderIsOn:Ae,onToggleClick:function(e){var t={keyword:Re,title:e.title||"",text:e.description||"",date:e.publishedAt||"",source:e.source.name||"",link:e.url,image:e.urlToImage||"https://s1.reutersmedia.net/resources_v2/images/rcom-default.png?w=800"},n=$(J()),a=O.find((function(t){return t.title===e.title}));a?n.deleteSavedNews(a._id).then((function(){return n.getSavedNews()})).then((function(e){return _(e)})):n.saveNews(t).then((function(){return n.getSavedNews()})).then((function(e){return _(e)}))},currentUser:o})}),Object(a.jsx)(U,{})]}),Object(a.jsxs)("section",{className:"popup-forms",children:[Object(a.jsx)(Y,{name:"card-del",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",savebtn:"\u0414\u0430"}),Object(a.jsx)(X,{isOpen:C,onClose:We,onRedirect:$e,onClick:Ze,onLogin:function(e,t){Fe(!0),function(e,t){return fetch("".concat(B,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).catch((function(e){throw console.log(e,"\u041e\u0448\u0438\u0431\u043aa \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 signin"),new Error(e)}))}(e,t).then((function(e){var t;t=e.token,localStorage.setItem(H,t),_e(""),We(),h(!0),Fe(!1)})).catch((function(e){_e("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443."),Fe(!1)}))},messageOnLogin:Oe,isSubmitting:ze}),Object(a.jsx)(Q,{isOpen:E,onClose:We,onRedirect:$e,onClick:Ze,onRegister:function(e,t,n){(function(e,t,n){return fetch("".concat(B,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).catch((function(e){throw console.log(e,"\u041e\u0448\u0438\u0431\u043aa \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 signup"),new Error(e)}))})(e,t,n).then((function(){We(),we(!0),je(!0),me("")})).catch((function(e){je(!0),we(!1),me("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443.")}))},messageOnRegister:he,isSubmitting:ze}),Object(a.jsx)(ee,{success:Ne,isOpen:de,onClose:We,onRedirect:$e,onClick:Ze})]})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(ae,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[57,1,2]]]);
//# sourceMappingURL=main.b40579b6.chunk.js.map